{% extends 'boog_base.html' %}
{% block content %}
<div>
<a href="{{ url_for('.status_report', start=start.date()-span, end=end.date()) }}">&lt;--</a> Start: {{ start.date() }}
<a href="{{ url_for('.status_report', start=start.date()+span, end=end.date()) }}">--&gt;</a>
| <a href="{{ url_for('.status_report') }}">Reset</a> 
| End: 
<a href="{{ url_for('.status_report', start=start.date(), end=end.date()-span) }}">&lt;--</a> 
{{ end.date() }} <a href="{{ url_for('.status_report', start=start.date(), end=end.date()+span) }}">--&gt;</a> 
</div>

<table border="1" style="empty-cells: hide;">
    <tr>
        <th>Project</th>
        <th>Task ID</th>
        <th>Task Title</th>
        <th>Hours Spent</th>
        <th>Hours Left</th>
    </tr>
    {% for project in report %}
    <tr><td>{{ project.id }} - {{ project.name }}</td></td></tr>
    {% for task in report[project]|sort %}
    <tr>
        <td></td>
        <td><a href="{{ url_for('.task') }}?id={{ task.id }}">{{ task.id }}</a></td>
        <td>{{ task.title }}</td>
        <td style="background: #eee; color: blue;">{{ "{:.2f} hrs".format(task.hours_spent_by_user(current_user.get_id(), start, end).total_seconds()/60/60) }}</td>
        <td style="background: #eee;{% if task.time_left < 0 %}color: red;{% endif %}">{{ "{:.2f} hrs".format(task.time_left.total_seconds()/60/60) }}</td>
    </tr>
    {% endfor %}
    {% endfor %}
</table>

{% endblock %}
